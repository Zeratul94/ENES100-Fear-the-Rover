/*Libraries */


/* Objects */

/* Pins (FILLER VALUES RIGHT NOW)*/
const int fr_foward_pin = 5;     //PWM digital
const int fr_backward_pin = 4;   //PWM digital

const int fl_foward_pin = 10;     //PWM digital
const int fl_backward_pin = 11;   //PWM digital

const int br_foward_pin = 3;     //PWM digital
const int br_backward_pin = 2;   //PWM digital

const int bl_foward_pin = 13;     //PWM digital
const int bl_backward_pin = 12;   //PWM digital



/* Other constants (FILLER VALUES RIGHT NOW) */
const double fr_foward_input = 255;
const double fl_foward_input = 255;
const double br_foward_input = 255;
const double bl_foward_input = 255;

//right side may need more power?
const double fr_strafe_left_input = 200;
const double fl_strafe_left_input = 150;
const double br_strafe_left_input = 200;
const double bl_strafe_left_input = 150;

//left side may need more power?
const double fr_strafe_right_input = 150;
const double fl_strafe_right_input = 200;
const double br_strafe_right_input = 150;
const double bl_strafe_right_input = 200;

const double nav_speed = 8; // Get through testing Units: cm/sec   
const double strafe_speed = 8; //get through testing Units: cm.sec

const double fr_rot_input = .15;
const double fl_rot_input = .15;
const double br_rot_input = .15;
const double bl_rot_input = .15;

const double rot_speed = 3.14/2; // Get through testing Units:rot/sec


//distance in cm
void move_foward(double distance) {
  analogWrite(fl_foward_pin, fl_foward_input);
  analogWrite(fr_foward_pin, fr_foward_input);
  analogWrite(bl_foward_pin, bl_foward_input);
  analogWrite(br_foward_pin, br_foward_input);
  delay((distance/nav_speed)*pow(10,3));
  analogWrite(fl_foward_pin, 0);
  analogWrite(fr_foward_pin, 0);
  analogWrite(bl_foward_pin, 0);
  analogWrite(br_foward_pin, 0);
}

void move_foward() {
  analogWrite(fl_foward_pin, fl_foward_input);
  analogWrite(fr_foward_pin, fr_foward_input);
  analogWrite(bl_foward_pin, bl_foward_input);
  analogWrite(br_foward_pin, br_foward_input);
}

//distance in cm
void move_backward(double distance) {
  analogWrite(fl_backward_pin, fl_foward_input);
  analogWrite(fr_backward_pin, fr_foward_input);
  analogWrite(bl_backward_pin, bl_foward_input);
  analogWrite(br_backward_pin, br_foward_input);
  delay((distance/nav_speed)*pow(10,3));
  analogWrite(fl_backward_pin, 0);
  analogWrite(fr_backward_pin, 0);
  analogWrite(bl_backward_pin, 0);
  analogWrite(br_backward_pin, 0);
}

void move_backward() {
  analogWrite(fl_backward_pin, fl_foward_input);
  analogWrite(fr_backward_pin, fr_foward_input);
  analogWrite(bl_backward_pin, bl_foward_input);
  analogWrite(br_backward_pin, br_foward_input);
}

//distance in cm
void move_right(double distance) {
  analogWrite(fl_foward_pin, fl_strafe_right_input);
  analogWrite(fr_backward_pin, fr_strafe_right_input);
  analogWrite(bl_backward_pin, bl_strafe_right_input);
  analogWrite(br_foward_pin, br_strafe_right_input);
  delay((distance/strafe_speed)*pow(10,3));
  analogWrite(fl_foward_pin, 0);
  analogWrite(fr_backward_pin, 0);
  analogWrite(bl_backward_pin, 0);
  analogWrite(br_foward_pin, 0);
}

void move_right() {
  analogWrite(fl_foward_pin, fl_strafe_right_input);
  analogWrite(fr_backward_pin, fr_strafe_right_input);
  analogWrite(bl_backward_pin, bl_strafe_right_input);
  analogWrite(br_foward_pin, br_strafe_right_input);
}

//distance in cm
void move_left(double distance) {
  analogWrite(fl_backward_pin, fl_strafe_left_input);
  analogWrite(fr_foward_pin, fr_strafe_left_input);
  analogWrite(bl_foward_pin, bl_strafe_left_input);
  analogWrite(br_backward_pin, br_strafe_left_input);
  delay((distance/strafe_speed)*pow(10,3));
  analogWrite(fl_backward_pin, 0);
  analogWrite(fr_foward_pin, 0);
  analogWrite(bl_foward_pin, 0);
  analogWrite(br_backward_pin, 0);
}

void move_left() {
  analogWrite(fl_backward_pin, fl_strafe_left_input);
  analogWrite(fr_foward_pin, fr_strafe_left_input);
  analogWrite(bl_foward_pin, bl_strafe_left_input);
  analogWrite(br_backward_pin, br_strafe_left_input);
}

void spin_CCW(double radians) {
  analogWrite(fl_backward_pin, fl_foward_input);
  analogWrite(fr_foward_pin, fr_foward_input);
  analogWrite(bl_backward_pin, bl_foward_input);
  analogWrite(br_foward_pin, br_foward_input);
  delay((radians/rot_speed)*pow(10,3));
  analogWrite(fl_backward_pin, 0);
  analogWrite(fr_foward_pin, 0);
  analogWrite(bl_backward_pin, 0);
  analogWrite(br_foward_pin, 0);
}

void spin_CCW() {
  analogWrite(fl_backward_pin, fl_foward_input);
  analogWrite(fr_foward_pin, fr_foward_input);
  analogWrite(bl_backward_pin, bl_foward_input);
  analogWrite(br_foward_pin, br_foward_input);
}

void spin_CW(double radians) {
  analogWrite(fl_foward_pin, fl_foward_input);
  analogWrite(fr_backward_pin, fr_foward_input);
  analogWrite(bl_foward_pin, bl_foward_input);
  analogWrite(br_backward_pin, br_foward_input);
  delay((radians/rot_speed)*pow(10,3));
  analogWrite(fl_foward_pin, 0);
  analogWrite(fr_backward_pin, 0);
  analogWrite(bl_foward_pin, 0);
  analogWrite(br_backward_pin, 0);
}

void spin_CW() {
  analogWrite(fl_foward_pin, fl_foward_input);
  analogWrite(fr_backward_pin, fr_foward_input);
  analogWrite(bl_foward_pin, bl_foward_input);
  analogWrite(br_backward_pin, br_foward_input);
}


void stop_motor() {
  analogWrite(fl_foward_pin, 0);
  analogWrite(fl_backward_pin, 0);
  analogWrite(fr_foward_pin, 0);
  analogWrite(fr_backward_pin, 0);
  analogWrite(bl_foward_pin, 0);
  analogWrite(bl_backward_pin, 0);
  analogWrite(br_foward_pin, 0);
  analogWrite(br_backward_pin, 0);
}



void setup() {
  stop_motor();
  delay(500);
  move_foward();
  delay(1000*17);
  stop_motor();
  delay(500);
  spin_CCW();
  delay(4800/2);
  stop_motor();
  delay(500);
  spin_CCW();
  delay(4800/2);
  stop_motor();
  delay(500);
  spin_CCW();
  delay(4800/2);
  stop_motor();
  /*move_foward();
  delay(5000);
  stop_motor();
  move_backward();
  delay(5000);
  stop_motor();
  move_left();
  delay(5000);
  stop_motor();
  move_right();
  delay(5000);
  stop_motor();
  spin_CW();
  delay(4800);
  stop_motor();
  spin_CCW();
  delay(4800);
  stop_motor();


}

void loop() {
  //testing steps, move foward for 10 seconds, adjust to make sure drivetrain is moving straight
  //move foward 5 seconds measure distance it travels
}


